<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FETP Cost–Value Decision Aid Tool</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container-fluid">
    <header class="text-center">
      <h1>FETP Cost–Value Decision Aid Tool</h1>
      <p class="lead">Explore programme configurations to predict uptake, evaluate cost–value tradeoffs, and inform policy design.</p>
    </header>
    <div class="instruction-banner card">
      <i class="fa-solid fa-circle-info info-icon" data-bs-toggle="tooltip" title="Follow these steps to use the tool"></i>
      <strong>How to Use:</strong> Configure settings in <em>Inputs</em>, adjust costs in <em>Costs & Value</em>, and click <em>Calculate & View Results</em> to see results. Save scenarios in <em>Scenarios</em> for comparison.
    </div>
    <nav class="tabs" role="tablist">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="introTab-tab" data-bs-toggle="tab" data-bs-target="#introTab" type="button" role="tab" aria-controls="introTab" aria-selected="true">
            <i class="fa-solid fa-info-circle info-icon"></i> Introduction
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="attributesTab-tab" data-bs-toggle="tab" data-bs-target="#attributesTab" type="button" role="tab" aria-controls="attributesTab" aria-selected="false">
            <i class="fa-solid fa-list info-icon"></i> Attributes
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="inputsTab-tab" data-bs-toggle="tab" data-bs-target="#inputsTab" type="button" role="tab" aria-controls="inputsTab" aria-selected="false">
            <i class="fa-solid fa-sliders info-icon"></i> Inputs
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="probTab-tab" data-bs-toggle="tab" data-bs-target="#probTab" type="button" role="tab" aria-controls="probTab" aria-selected="false">
            <i class="fa-solid fa-chart-pie info-icon"></i> Uptake
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="costsTab-tab" data-bs-toggle="tab" data-bs-target="#costsTab" type="button" role="tab" aria-controls="costsTab" aria-selected="false">
            <i class="fa-solid fa-calculator info-icon"></i> Costs & Value
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="scenariosTab-tab" data-bs-toggle="tab" data-bs-target="#scenariosTab" type="button" role="tab" aria-controls="scenariosTab" aria-selected="false">
            <i class="fa-solid fa-folder-open info-icon"></i> Scenarios
          </button>
        </li>
      </ul>
    </nav>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="introTab" role="tabpanel" aria-labelledby="introTab-tab">
        <div class="card">
          <h2>Introduction</h2>
          <p>This tool allows you to model uptake of FETP programme configurations and compare their costs with stakeholder-perceived value (derived from DCE preferences). Value is not cost but an indicator of perceived benefit of design features.</p>
        </div>
      </div>
      <div class="tab-pane fade" id="attributesTab" role="tabpanel" aria-labelledby="attributesTab-tab">
        <h2>Key Program Attributes</h2>
        <div class="row g-4">
          <!-- Attribute cards remain as in original code -->
        </div>
      </div>
      <div class="tab-pane fade" id="inputsTab" role="tabpanel" aria-labelledby="inputsTab-tab">
        <div class="card">
          <h2>Configure Program</h2>
          <form>
            <div class="input-cards row g-4">
              <!-- Input-level cards remain as in original code -->
            </div>
            <div class="buttons-row mt-3">
              <button type="button" class="btn btn-secondary" onclick="resetInputs()">Reset</button>
              <button type="button" class="btn btn-primary" onclick="calculateScenario()">Calculate & View Results</button>
              <button type="button" class="btn btn-primary" onclick="optimizeConfiguration()">Optimize Configuration</button>
            </div>
          </form>
          <div class="modal fade" id="resultModal" tabindex="-1" aria-labelledby="resultModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-xl">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="resultModalLabel">Scenario Results</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div id="modalResults"></div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="probTab" role="tabpanel" aria-labelledby="probTab-tab">
        <div class="card">
          <h4>Predicted Uptake</h4>
          <p>Estimates the percentage of people who would accept the programme configuration.</p>
          <div class="progress mt-3">
            <div id="uptakeBar" class="progress-bar bg-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
          </div>
          <button class="btn btn-primary mt-3" onclick="showUptakeRecommendations()">Recommendation</button>
        </div>
        <div class="modal fade" id="uptakeModal" tabindex="-1" aria-labelledby="uptakeModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="uptakeModalLabel">Uptake Recommendations</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div id="uptakeResults"></div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="costsTab" role="tabpanel" aria-labelledby="costsTab-tab">
        <div class="card">
          <h4>Cost–Value Analysis</h4>
          <p>Compares the costs of implementing the program to stakeholder-perceived value. This value represents the benefits participants and decision-makers assign to the program design.</p>
          <div class="row g-4">
            <div class="col-md-6">
              <h5>Direct Costs</h5>
              <!-- Direct cost input fields remain as in original code -->
            </div>
            <div class="col-md-6">
              <h5>Indirect Costs</h5>
              <!-- Indirect cost input fields remain as in original code -->
              <h5>Value Scenario (₹ per effective trainee)</h5>
              <select id="benefitScenario" class="form-control mb-3">
                <option value="low">Low – ₹30,000</option>
                <option value="medium" selected>Medium – ₹50,000</option>
                <option value="high">High – ₹70,000</option>
              </select>
            </div>
          </div>
          <div id="costsBenefitsResults"></div>
          <div class="chart-container">
            <canvas id="costBenefitChart" class="chart-box"></canvas>
          </div>
          <div class="chart-container">
            <canvas id="netBenefitChart" class="chart-box"></canvas>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="scenariosTab" role="tabpanel" aria-labelledby="scenariosTab-tab">
        <div class="card">
          <h4>Saved Scenarios</h4>
          <p>Save and compare program scenarios to analyze their impacts.</p>
          <button onclick="saveScenario()" class="btn btn-primary me-2">Save Scenario</button>
          <button onclick="openComparison()" class="btn btn-secondary me-2">Compare & Export PDF</button>
          <button onclick="downloadCSV()" class="btn btn-secondary">Download CSV</button>
          <div class="table-responsive mt-3">
            <table id="scenarioTable" class="table table-striped">
              <thead>
                <tr>
                  <th>Name</th><th>Delivery</th><th>Model</th><th>Type</th><th>Capacity</th><th>Stipend</th><th>Career</th><th>Geographic</th><th>Accreditation</th><th>Total Cost</th><th>Uptake%</th><th>Net Value</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <footer class="text-center mt-4">
      <p>© 2025 FETP Cost–Value Decision Aid Tool</p>
    </footer>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
